{"version":3,"sources":["bundle.es6"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function () {\n  'use strict';\n\n  function engineService () {\n    var engine = {};\n\n    engine.initialize = function (_ref) {\n      var canvas = _ref.canvas;\n      var _ref$drawInterval = _ref.drawInterval;\n      var drawInterval = _ref$drawInterval === undefined ? 5 : _ref$drawInterval;\n      var _ref$showFps = _ref.showFps;\n      var showFps = _ref$showFps === undefined ? false : _ref$showFps;\n\n      engine.canvas = canvas;\n      engine.draw = {\n        interval: drawInterval,\n        nextInterval: function nextInterval() {\n          this.iteration = 0;\n          this.intervalStart = new Date();\n        },\n        iteration: 0,\n        intervalStart: new Date(),\n        intervalTime: function intervalTime() {\n          var timePerInterval = new Date() - this.intervalStart;\n          var updatesPerSecond = this.interval * (1000 / timePerInterval);\n          console.log(\"updates per second:\", Math.ceil(updatesPerSecond));\n        }\n      };\n      engine.showFps = showFps;\n    };\n\n    engine.logCanvas = function () {\n      console.log(engine.canvas);\n    };\n\n    var renderService = function renderService() {\n      var render = {};\n\n      var addSprites = function addSprites(sprites, spriteArr) {\n\n        sprites.forEach(function (sprite) {\n          spriteArr.push(sprite);\n        });\n      };\n\n      var entities = {\n        all: []\n      };\n\n      entities.drawSprites = function (ctx) {\n        var drawEntity = function drawEntity(entity) {\n          entity.sprites().forEach(function (sprite) {\n            ctx.beginPath();\n            sprite.draw(ctx);\n            ctx.closePath();\n          });\n        };\n\n        entities.all.forEach(drawEntity);\n      };\n\n      entities.update = function () {\n        entities.all.forEach(function (entity) {\n          entity.move();\n        });\n      };\n\n      render.addEntity = function (entity) {\n        entities.all.push(entity);\n      };\n\n      render.update = function () {\n        entities.update();\n\n        if (engine.draw.iteration > engine.draw.interval - 1) {\n          if (engine.showFps) engine.draw.intervalTime();\n          engine.draw.nextInterval();\n\n          var ctx = engine.canvas.getContext('2d');\n\n          ctx.clearRect(0, 0, engine.canvas.width, engine.canvas.height);\n\n          entities.drawSprites(ctx);\n        } else {\n          engine.draw.iteration++;\n        }\n      };\n\n      return render;\n    };\n\n    engine.render = renderService();\n\n    return engine;\n  }\n\n  function gameFactory() {\n    var game = {};\n    game.engine = engineService();\n    return game;\n  }\n\n  var game = gameFactory();\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var _class$1 = function () {\n    function _class(_ref) {\n      var type = _ref.type;\n      var position = _ref.position;\n      var _ref$color = _ref.color;\n      var color = _ref$color === undefined ? { r: 255, g: 0, b: 0 } : _ref$color;\n      var _ref$opacity = _ref.opacity;\n      var opacity = _ref$opacity === undefined ? 1 : _ref$opacity;\n      var _ref$radius = _ref.radius;\n      var radius = _ref$radius === undefined ? 40 : _ref$radius;\n      var parent = _ref.parent;\n      classCallCheck(this, _class);\n\n      this.type = type;\n      this.parent = parent;\n      this.position = position;\n      this.color = color;\n      this.opacity = opacity;\n      this.radius = radius;\n    }\n\n    createClass(_class, [{\n      key: 'rgbaValue',\n      value: function rgbaValue(color, opacity) {\n        return 'rgba(' + color.r + ', ' + color.g + ', ' + color.b + ',  ' + opacity + ')';\n      }\n    }, {\n      key: 'drawCircle',\n      value: function drawCircle(ctx) {\n        ctx.fillStyle = this.rgbaValue(this.color, 1);\n        if (!this.position) {\n          console.log(this);\n        }\n        ctx.arc(this.position().x, this.position().y, this.radius, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.lineWidth = 1;\n        var strokeColor = this.rgbaValue({\n          r: parseInt(this.color.r / 3),\n          g: parseInt(this.color.g / 3),\n          b: parseInt(this.color.b / 3)\n        }, 1);\n        ctx.strokeStyle = strokeColor;\n        ctx.stroke();\n      }\n    }, {\n      key: 'draw',\n      value: function draw(ctx) {\n        switch (this.type) {\n          case 'circle':\n            this.drawCircle(ctx);\n            break;\n          case 'circle-gradient':\n            this.drawCircleGradient(ctx);\n            break;\n        }\n      }\n    }]);\n    return _class;\n  }();\n\n  var directionHelper = {};\n\n  directionHelper.invert = function (direction) {\n    return {\n      x: direction.x * -1,\n      y: direction.y * -1\n    };\n  };\n\n  directionHelper.move = function (start, movement) {\n    return {\n      x: start.x + movement.x,\n      y: start.y + movement.y\n    };\n  };\n\n  directionHelper.angleToDirection = function (_ref) {\n    var angle = _ref.angle;\n    var distance = _ref.distance;\n\n    var direction = angle / 360 * Math.PI - Math.PI / 2;\n    return {\n      x: distance * Math.cos(direction),\n      y: distance * Math.sin(direction)\n    };\n  };\n\n  function segmentFactory (_ref) {\n    var creature = _ref.creature;\n    var startPosition = _ref.startPosition;\n\n    var segment = {\n      creature: creature,\n      childPendingMoves: [],\n      position: startPosition\n    };\n\n    segment.pendChildDirectionChange = function (direction) {\n      if (segment.child) {\n        segment.childPendingMoves.push({\n          direction: direction,\n          distance: 0\n        });\n      }\n    };\n\n    segment.changeDirection = function (direction) {\n      segment.direction = direction;\n      segment.pendChildDirectionChange(direction);\n      // console.log('new direction is', this.direction);\n    };\n    segment.updatePosition = function () {\n      segment.position = directionHelper.move(segment.position, segment.direction);\n    };\n\n    segment.sprite = new _class$1({\n      type: 'circle',\n      parent: segment,\n      radius: segment.creature.radius(),\n      position: function position() {\n        return segment.position;\n      },\n      color: { r: creature.color.r, g: creature.color.g, b: creature.color.b }\n    });\n\n    return segment;\n  }\n\n  function childSegmentFactory (_ref) {\n    var parent = _ref.parent;\n    var _ref$colorModifier = _ref.colorModifier;\n    var colorModifier = _ref$colorModifier === undefined ? 0 : _ref$colorModifier;\n    var creature = _ref.creature;\n\n    var startPosition = { x: parent.position.x, y: parent.position.y };\n    var segment = segmentFactory({ startPosition: startPosition, creature: creature });\n\n    segment.type = 'child';\n    segment.parent = parent;\n    segment.checkForMoves = function () {\n      segment.parent.childPendingMoves.forEach(function (move, index) {\n        if (move.distance >= creature.segmentDistance) {\n          segment.changeDirection(move.direction);\n\n          segment.parent.childPendingMoves.splice(index, 1);\n        } else {\n          move.distance++;\n        }\n      });\n    };\n    segment.direction = { x: 0, y: 0 };\n\n    segment.update = function () {\n      this.checkForMoves();\n      this.updatePosition();\n    };\n\n    parent.child = segment;\n\n    return segment;\n  }\n\n  function rootSegmentFactory (_ref) {\n    var startPosition = _ref.startPosition;\n    var creature = _ref.creature;\n\n    var rootSegment = segmentFactory({ startPosition: startPosition, creature: creature });\n\n    rootSegment.type = 'root';\n    rootSegment.child = null;\n    rootSegment.direction = { x: 0, y: 0 };\n    rootSegment.update = function () {\n      rootSegment.updatePosition();\n    };\n\n    return rootSegment;\n  }\n\n  var _class = function () {\n    function _class(_ref) {\n      var _ref$position = _ref.position;\n      var position = _ref$position === undefined ? { x: 0, y: 0 } : _ref$position;\n      var _ref$color = _ref.color;\n      var color = _ref$color === undefined ? { r: 255, g: 0, b: 0 } : _ref$color;\n      var _ref$length = _ref.length;\n      var length = _ref$length === undefined ? 10 : _ref$length;\n      var _ref$direction = _ref.direction;\n      var direction = _ref$direction === undefined ? 0 : _ref$direction;\n      var _ref$autonomous = _ref.autonomous;\n      var autonomous = _ref$autonomous === undefined ? false : _ref$autonomous;\n      var _ref$thinkInterval = _ref.thinkInterval;\n      var thinkInterval = _ref$thinkInterval === undefined ? 100 : _ref$thinkInterval;\n      classCallCheck(this, _class);\n\n\n      this.currentPosition = position;\n      this.segmentPositions = [position];\n\n      this.segmentDistance = 9;\n\n      this.color = color;\n\n      this.stepDistance = 1;\n      this.angle = direction;\n      this.direction = directionHelper.angleToDirection({ angle: direction, distance: this.stepDistance });\n\n      this.length = length;\n\n      if (autonomous) {\n        this.autonomous = true;\n        this.brain = {};\n        this.brain.thinkInterval = thinkInterval;\n        this.brain.thinkStep = 0;\n      }\n\n      this.segments = this.generateInitialSegments();\n    }\n\n    createClass(_class, [{\n      key: 'move',\n      value: function move() {\n        if (this.autonomous) {\n          this.think();\n        }\n        this.segments.forEach(function (segment) {\n          segment.update();\n        });\n      }\n    }, {\n      key: 'updateDirection',\n      value: function updateDirection(angle) {\n        this.currentAngle = angle;\n        var newDirection = directionHelper.angleToDirection({ angle: angle, distance: this.stepDistance });\n        this.rootSegment.changeDirection(newDirection);\n      }\n    }, {\n      key: 'think',\n      value: function think() {\n        if (this.brain.thinkStep > this.brain.thinkInterval) {\n          this.brain.thinkStep = 0;\n          var newDirection = parseInt(Math.random() * 720 - 360);\n          this.updateDirection(newDirection + this.angle);\n        } else {\n          this.brain.thinkStep++;\n        }\n      }\n    }, {\n      key: 'radius',\n      value: function radius() {\n        return 8 + this.length / 20;\n      }\n    }, {\n      key: 'sprites',\n      value: function sprites() {\n        return this.segments.map(function (segment) {\n          return segment.sprite;\n        }).reverse();\n      }\n    }, {\n      key: 'generateInitialSegments',\n      value: function generateInitialSegments() {\n        var creature = this;\n        var initialAngle = 0;\n\n        var rootSegment = rootSegmentFactory({\n          startPosition: { x: this.currentPosition.x, y: this.currentPosition.y },\n          creature: creature\n        });\n        this.rootSegment = rootSegment;\n\n        console.log('root segment created');\n\n        var segments = [rootSegment];\n\n        for (var idx = 1; idx < this.length; idx++) {\n          var childSegment = childSegmentFactory({\n            creature: creature,\n            parent: segments[segments.length - 1],\n            colorModifier: idx / this.length\n          });\n          childSegment.update();\n          console.log('updated child segment');\n          segments.push(childSegment);\n        }\n\n        console.log('initial segments generated');\n\n        return segments;\n      }\n    }]);\n    return _class;\n  }();\n\n  var canvas = document.getElementById(\"slitherbots-canvas\");\n\n  canvas.width = window.innerWidth * 0.90;\n  canvas.height = window.innerHeight * 0.90;\n\n  console.log(game);\n\n  game.engine.initialize({ canvas: canvas, drawInterval: 6, showFps: false });\n  game.engine.logCanvas();\n\n  var canvasCenter = function canvasCenter() {\n    return { x: canvas.width / 2, y: canvas.height / 2 };\n  };\n\n  var addBots = function addBots(number) {\n    for (var i = 0; i < number; i++) {\n      var rand1 = Math.random();\n      var rand2 = Math.random();\n      var rand3 = Math.random();\n\n      game.engine.render.addEntity(new _class({\n        position: canvasCenter(),\n        length: Math.floor(rand1 * 100),\n        direction: Math.floor(rand2 * 360),\n        autonomous: true,\n        thinkInterval: Math.floor(20 + rand3 * 50),\n        color: { r: Math.floor(rand1 * 255), g: Math.floor(rand2 * 255), b: Math.floor(rand3 * 255) }\n      }));\n    }\n  };\n\n  addBots(10);\n\n  var slitherbot2 = new _class({\n    position: canvasCenter(),\n    length: 15,\n    direction: 1,\n    color: { r: 255, g: 100, b: 255 }\n  });\n\n  var count = 0;\n  var direction = 1;\n  var variability = 100;\n\n  var update = function update() {\n    if (count % 10 === 0) {\n      var variation = parseInt(Math.random() * variability) - variability / 2;\n      direction += 20 + variation;\n      slitherbot2.updateDirection(direction);\n    }\n    count++;\n    game.engine.render.update();\n  };\n\n  window.setInterval(function () {\n    window.requestAnimationFrame(update);\n  }, 1);\n\n  /*\n  var ctx = c.getContext(\"2d\");\n  ctx.fillStyle = \"#FF0000\";\n  ctx.fillRect(0,0,150,75);\n  */\n\n}());"]}